from django.db import models
from django.utils import timezone
from model_utils import Choices
from django_fsm import FSMField, transition

"""
Django FSM Model for {{DiagramName}}

Generated by Grotsoft's PUML FSM generator
https://github.com/Scratchydisk/PUML-fsm-generator

Generated on : {{GeneratedOn}}
Source PUML  : {{Metadata.StateModelFile}}
Template     : {{Metadata.TemplateFileName}}


Inject Source PUML?
"""

class {{#F.PascalCase}}{{DiagramName}}State{{/F.PascalCase}}(object):
	"""
	Constants to represent the states of the PublishableModel
	"""
	CHOICES = new Choices(
	{{#States}}
		("{{#F.Upper}}{{StateName}}{{/F.Upper}}", "{{#F.PascalCase}}{{StateName}}{{/F.PascalCase}}", "{{#Description}}{{DescriptionLine}} {{/Description}}"),
	{{/States}}
	)

Metadata
========

Source PUML : {{Metadata.StateModelFile}}
Template    : {{Metadata.TemplateFileName}}
Gen Folder  : {{Metadata.QualifiedGenerateFolder}}

Diagram Name: {{DiagramName}}
Namespace   : {{Namespace}}
Generated On: {{GeneratedOn}}

Model States
============

{{#States}}
State Name : {{StateName}}
Timeout ms : {{Timeout}}
State Description: 
    {{#Description}}
	- {{DescriptionLine}}
	{{/Description}}

On Entry Action: {{OnEntryAction}}
On Entry Description:
    {{#OnEntryDescription}}
	- {{DescriptionLine}}
	{{/OnEntryDescription}}

On Exit Action: {{OnExitAction}}
On Exit Description:
    {{#OnExitDescription}}
	- {{DescriptionLine}}
	{{/OnExitDescription}}

{{/States}}

Model Transitions
=================

{{#Transitions}}
Triggered By : {{EventName}}
From State   : {{StartStateName}}
To State     : {{EndStateName}}
Transition Description: 
    {{#Description}}
	- {{DescriptionLine}}
	{{/Description}}

{{/Transitions}}

Events
======

{{#Events}}
Event Name : {{EventName}}
Index      : {{Index}}
{{/Events}}

User Events
===========

{{#UserEvents}}
Event Name : {{EventName}}
Index      : {{Index}}
{{/UserEvents}}


